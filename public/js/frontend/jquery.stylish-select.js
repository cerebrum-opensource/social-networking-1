!function(e){e("html").addClass("stylish-select"),Array.prototype.indexOf=function(e,t){for(var i=t||0;i<this.length;i++)if(this[i]==e)return i},e.fn.extend({getSetSSValue:function(t){return t?(e(this).val(t).change(),this):e(this).find(":selected").val()},resetSS:function(){var t=e(this).data("ssOpts");$this=e(this),$this.next().remove(),$this.unbind(".sSelect").sSelect(t)}}),e.fn.sSelect=function(t){return this.each(function(){function i(){var e=S.offset().top,t=jQuery(window).height(),i=jQuery(window).scrollTop();m>parseInt(f.ddMaxHeight)&&(m=parseInt(f.ddMaxHeight)),e-=i,e+m>=t?(g.css({top:"-"+m+"px",height:m}),p.onTop=!0):(g.css({top:L+"px",height:m}),p.onTop=!1)}function s(){S.css("position","relative")}function n(){S.css("position","static")}function a(e,t){h.removeClass("hiLite").eq(e).addClass("hiLite"),g.is(":visible")&&h.eq(e).focus();var i=h.eq(e).html(),s=h.eq(e).parent().data("key");if(1==t)return p.val(s),v.text(i),!1;try{p.val(s)}catch(n){p[0].selectedIndex=e}p.change(),v.text(i)}function r(t){e(t).unbind("keydown.sSelect").bind("keydown.sSelect",function(e){var t=e.which;switch(C=!0,t){case 40:case 39:return c(),!1;case 38:case 37:return o(),!1;case 33:case 36:return l(),!1;case 34:case 35:return d(),!1;case 13:case 27:return g.hide(),n(),!1}keyPressed=String.fromCharCode(t).toLowerCase();var i=y.indexOf(keyPressed);return"undefined"!=typeof i?(++w,w=y.indexOf(keyPressed,w),(-1==w||null==w||b!=keyPressed)&&(w=y.indexOf(keyPressed)),a(w),b=keyPressed,!1):void 0})}function c(){k-1>w&&(++w,a(w))}function o(){w>0&&(--w,a(w))}function l(){w=0,a(w)}function d(){w=k-1,a(w)}var h,u={defaultText:"SELECT",animationSpeed:0,ddMaxHeight:"200px",containerClass:"jquery_stylish_select"},f=e.extend(u,t),p=e(this),v=e('<div class="selectedTxt"></div>'),S=e('<div class="newListSelected '+f.containerClass+'"></div>'),g=e('<ul class="newList" style="visibility:hidden;"></ul>'),x=-1,w=-1,y=[],b=!1,C=!1;e(this).data("ssOpts",t),S.insertAfter(p),S.attr("tabindex",p.attr("tabindex")||"0"),v.prependTo(S),g.appendTo(S),p.hide(),v.data("ssReRender",!v.is(":visible")),0==p.children("optgroup").length?(p.children().each(function(t){var i=e(this).html(),s=e(this).val();y.push(i.charAt(0).toLowerCase()),1==e(this).attr("selected")&&(f.defaultText=i,w=t),g.append(e('<li><a href="JavaScript:void(0);">'+i+"</a></li>").data("key",s))}),h=g.children().children()):(p.children("optgroup").each(function(){var t=e(this).attr("label"),i=e('<li class="newListOptionTitle">'+t+"</li>");i.appendTo(g);var s=e("<ul></ul>");s.appendTo(i),e(this).children().each(function(){++x;var t=e(this).html(),i=e(this).val();y.push(t.charAt(0).toLowerCase()),1==e(this).attr("selected")&&(f.defaultText=t,w=x),s.append(e('<li><a href="JavaScript:void(0);">'+t+"</a></li>").data("key",i))})}),h=g.find("ul li a"));var m=g.height(),L=S.height(),k=h.length;-1!=w?a(w,!0):v.text(f.defaultText),i(),e(window).bind("resize.sSelect scroll.sSelect",i),v.bind("click.sSelect",function(t){t.stopPropagation(),e(this).data("ssReRender")&&(m=g.height("").height(),L=S.height(),e(this).data("ssReRender",!1),i()),e(".newList").not(e(this).next()).hide().parent().css("position","static").removeClass("newListSelFocus"),g.toggle(),s(),h.eq(w).focus()}),h.bind("click.sSelect",function(t){var i=e(t.target);w=h.index(i),C=!0,a(w),g.hide(),S.css("position","static")}),h.bind("mouseenter.sSelect",function(t){var i=e(t.target);i.addClass("newListHover")}).bind("mouseleave.sSelect",function(t){var i=e(t.target);i.removeClass("newListHover")}),p.bind("change.sSelect",function(t){return $targetInput=e(t.target),1==C?(C=!1,!1):($currentOpt=$targetInput.find(":selected"),w=$targetInput.find("option").index($currentOpt),void a(w,!0))}),S.bind("click.sSelect",function(e){e.stopPropagation(),r(this)}),S.bind("focus.sSelect",function(){e(this).addClass("newListSelFocus"),r(this)}),S.bind("blur.sSelect",function(){e(this).removeClass("newListSelFocus")}),e(document).bind("click.sSelect",function(){S.removeClass("newListSelFocus"),g.hide(),n()}),v.bind("mouseenter.sSelect",function(t){var i=e(t.target);i.parent().addClass("newListSelHover")}).bind("mouseleave.sSelect",function(t){var i=e(t.target);i.parent().removeClass("newListSelHover")}),g.css({left:"0",display:"none",visibility:"visible"})})}}(jQuery);